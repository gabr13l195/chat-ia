<div class="input-container">
  <!-- Image Preview -->
  <div class="image-preview" *ngIf="imagePreview">
    <div class="preview-container">
      <img [src]="imagePreview" alt="Vista previa" class="preview-image" />
      <button class="remove-image" (click)="removeImage()" type="button">
        <span>Ã—</span>
      </button>
    </div>
  </div>

  <!-- Audio Preview -->
  <div class="audio-preview" *ngIf="audioPreview">
    <div class="preview-container">
      <audio [src]="audioPreview" controls class="preview-audio"></audio>
      <button class="remove-audio" (click)="removeAudio()" type="button">
        <span>Ã—</span>
      </button>
    </div>
  </div>

  <!-- Input Area -->
  <div class="input-area" 
       [ngClass]="{'dragging': isDragging}"
       (dragover)="onDragOver($event)"
       (dragleave)="onDragLeave($event)"
       (drop)="onDrop($event)">
    
    <div class="input-wrapper">
      <textarea
        [(ngModel)]="messageText"
        (keypress)="onKeyPress($event)"
        placeholder="Escribe tu mensaje aquÃ­..."
        class="message-input"
        rows="1"
        #messageTextarea>
      </textarea>
      
      <div class="input-actions">
        <!-- BotÃ³n de imagen -->
        <label class="file-input-label" for="image-upload">
          <span class="upload-icon">ğŸ“·</span>
          <input
            id="image-upload"
            type="file"
            accept="image/*"
            (change)="onFileSelected($event, 'image')"
            class="file-input"
            hidden>
        </label>
        
        <!-- BotÃ³n de audio -->
        <label class="file-input-label" for="audio-upload">
          <span class="upload-icon">ğŸµ</span>
          <input
            id="audio-upload"
            type="file"
            accept="audio/*"
            (change)="onFileSelected($event, 'audio')"
            class="file-input"
            hidden>
        </label>
        
        <!-- BotÃ³n de grabaciÃ³n -->
        <button 
          type="button"
          class="record-button"
          [ngClass]="{'recording': isRecording}"
          (click)="isRecording ? stopRecording() : startRecording()">
          <span class="record-icon">{{ isRecording ? 'â¹ï¸' : 'ğŸ¤' }}</span>
        </button>
        
        <button 
          type="button"
          class="send-button"
          [disabled]="!messageText.trim() && !selectedImage && !selectedAudio"
          (click)="onSendMessage()">
          <span class="send-icon">â¤</span>
        </button>
      </div>
    </div>
    
    <!-- Drag & Drop Hint -->
    <div class="drag-hint" *ngIf="isDragging">
      <span>Â¡Suelta la imagen o audio aquÃ­!</span>
    </div>
  </div>
  
  <!-- Help Text -->
  <div class="help-text">
    <span>ğŸ’¡ Puedes arrastrar y soltar imÃ¡genes/audio aquÃ­, grabar audio con el micrÃ³fono, o usar los botones de archivo</span>
  </div>
</div>
